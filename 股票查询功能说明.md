# 📊 股票查询功能使用说明

## 🎉 新功能概览

你的 **Prompt Stock** 插件现在已经升级，新增了强大的**股票K线查询**功能！

### ✨ 功能特点

1. **智能识别市场** - 输入股票代码自动识别上证/深证/港股
2. **多种K线周期** - 支持1分钟到1月共8种周期
3. **数据可视化** - 使用ECharts专业K线图展示
4. **人性化显示** - 时间戳自动转换为可读日期
5. **交互式图表** - 支持缩放、拖拽、详细数据查看

---

## 🚀 快速开始

### 1. 刷新扩展

```
1. 访问 chrome://extensions/
2. 找到 Prompt Stock，点击刷新 🔄
3. 回到网页，打开侧边栏
```

### 2. 切换到股票查询

打开侧边栏后，点击顶部的 **"股票查询"** 标签页

### 3. 输入查询参数

- **股票代码**：如 `600519`（贵州茅台）、`000001`（平安银行）
- **K线周期**：选择你想要的周期（默认1天）
- **查询条目数**：输入要查询的数据条数（1-1000）

### 4. 查看K线图

点击"查询"按钮，即可看到专业的K线图表！

---

## 📖 详细使用指南

### 股票代码识别规则

插件会自动识别市场，无需手动选择：

| 股票代码开头 | 市场 | 示例 |
|------------|------|------|
| 6 | 上证 (SH) | 600519 (贵州茅台) |
| 0 | 深证 (SZ) | 000001 (平安银行) |
| 3 | 深证 (SZ) | 300750 (宁德时代) |
| 其他 | 港股 (HK) | 00700 (腾讯控股) |

### K线周期选项

| 周期 | 适用场景 |
|------|----------|
| 1分钟 | 超短线交易 |
| 5分钟 | 短线交易 |
| 15分钟 | 日内交易 |
| 30分钟 | 日内交易 |
| 1小时 | 短期波段 |
| 1天 | 中期趋势（默认） |
| 1周 | 长期趋势 |
| 1月 | 长期投资 |

### 查询条目数

- **最小值**：1条
- **最大值**：1000条
- **推荐值**：
  - 日内查看：30-60条
  - 短期分析：60-120条
  - 长期分析：200-500条

---

## 📊 K线图功能

### 图表信息

K线图包含以下信息：
- **开盘价** - 蓝色标注
- **收盘价** - 红色（涨）/ 绿色（跌）
- **最高价** - 红色标注
- **最低价** - 绿色标注
- **成交量** - 底部柱状图

### 交互操作

1. **鼠标悬停** - 查看详细数据
2. **滚轮缩放** - 放大/缩小图表
3. **拖拽平移** - 查看不同时间段
4. **底部滑块** - 选择显示范围

### 颜色说明

- 🔴 **红色** - 上涨（收盘价 > 开盘价）
- 🟢 **绿色** - 下跌（收盘价 < 开盘价）

---

## 💡 使用示例

### 示例 1：查看贵州茅台日K线

```
股票代码: 600519
K线周期: 1天
查询条目数: 60
```

→ 显示贵州茅台最近60个交易日的K线走势

### 示例 2：查看宁德时代5分钟K线

```
股票代码: 300750
K线周期: 5分钟
查询条目数: 100
```

→ 显示宁德时代最近100个5分钟周期的K线

### 示例 3：查看腾讯控股周K线

```
股票代码: 00700
K线周期: 1周
查询条目数: 52
```

→ 显示腾讯控股最近52周（约1年）的K线走势

---

## ⚠️ 注意事项

### 1. 数据来源

- 数据来自 **iTick API**
- 实时更新，准确可靠
- 包含主要A股和港股

### 2. 请求限制

- 单次查询最多1000条
- 建议合理设置条目数
- 避免频繁重复查询

### 3. 股票代码格式

- **上证**：直接输入6位代码（如 600519）
- **深证**：直接输入6位代码（如 000001）
- **港股**：输入5位代码（如 00700）

### 4. 网络要求

- 需要稳定的网络连接
- API请求可能需要几秒钟
- 查询时会显示加载动画

---

## 🎯 快捷技巧

### 1. 快速查询

在股票代码或条目数输入框中按 `Enter` 键，直接触发查询

### 2. 返回列表

查看图表时，点击右上角的 **X** 按钮返回查询表单

### 3. 切换功能

随时在 **Prompt管理** 和 **股票查询** 标签页之间切换

### 4. 键盘快捷键

- `Ctrl + M` - 打开/关闭侧边栏
- `Enter` - 在输入框中触发查询

---

## 🔧 故障排查

### Q: 显示"查询失败"？

**可能原因**：
- 股票代码错误
- 网络连接问题
- API服务暂时不可用

**解决方法**：
1. 检查股票代码是否正确
2. 检查网络连接
3. 稍后重试

### Q: 图表显示异常？

**解决方法**：
1. 刷新浏览器页面
2. 重新查询
3. 尝试减少查询条目数

### Q: 加载时间过长？

**解决方法**：
1. 减少查询条目数
2. 检查网络速度
3. 等待查询完成（不要重复点击）

---

## 🎨 功能架构

### 技术实现

```
┌─────────────────────────────────────┐
│         Prompt Stock 插件            │
├─────────────────────────────────────┤
│  Tab 1: Prompt管理                  │
│  ├─ 添加/编辑/删除 Prompt           │
│  ├─ 搜索功能                        │
│  └─ 一键复制                        │
├─────────────────────────────────────┤
│  Tab 2: 股票查询 (NEW!)             │
│  ├─ 智能代码识别                    │
│  ├─ API数据获取                     │
│  ├─ ECharts图表展示                 │
│  └─ 交互式操作                      │
└─────────────────────────────────────┘
```

### 核心组件

- **StockQuery** - 查询表单组件
- **StockChart** - ECharts图表组件
- **stockApi** - API调用工具
- **stock.ts** - 类型定义

---

## 📈 未来扩展

可能的功能增强（根据需求）：

- [ ] 技术指标（MA、MACD、KDJ等）
- [ ] 自选股收藏功能
- [ ] 多股对比图表
- [ ] 数据导出（CSV/Excel）
- [ ] 实时价格提醒
- [ ] 更多图表类型

---

## 🙏 使用建议

1. **学习使用** - 先用熟悉的股票测试功能
2. **合理周期** - 根据交易风格选择合适的K线周期
3. **数据分析** - 结合成交量和价格走势分析
4. **保存Prompt** - 可以在Prompt管理中保存常用的分析模板

---

## ✅ 功能对比

| 功能 | Prompt管理 | 股票查询 |
|------|-----------|----------|
| 保存文本 | ✅ | ❌ |
| 搜索过滤 | ✅ | ❌ |
| 一键复制 | ✅ | ❌ |
| K线图表 | ❌ | ✅ |
| 数据查询 | ❌ | ✅ |
| 实时更新 | ❌ | ✅ |

**两个功能互不干扰，可以自由切换使用！**

---

<div align="center">

**🎉 享受你的股票查询功能！**

Made with ❤️ | Powered by iTick API & ECharts

Version 1.1.0 | 2025-10-27

</div>

